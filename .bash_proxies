# Proxies

alias init-proxy=initProxy
alias kill-proxy=killProxy

function initProxy()
{
    # Host 'test' is part of the `~/.ssh/config` file
    SSH_HOST="test"
    process_pid=$(ps aux | grep -i "$SSH_HOST" | grep -v grep | awk {'print $2'})
    if [ "$process_pid" == "" ]; then
    	ssh -D 0.0.0.0:8080 -f -C -q -N "$SSH_HOST"
		process_pid=$(ps aux | grep -i "$SSH_HOST" | grep -v grep | awk {'print $2'})
		echo "Proxy running at 0.0.0.0:8080 with pid: $process_pid";
    else 
		echo "Proxy running at 0.0.0.0:8080 with pid: $process_pid";
    fi;
}

function killProxy()
{
    # Host 'test' is part of the `~/.ssh/config` file
    SSH_HOST="test"
    process_pid=$(ps aux | grep -i "$SSH_HOST" | grep -v grep | awk {'print $2'})
    if [ "$process_pid" != "" ]; then 
		kill $process_pid;
        echo "Proxy running at 0.0.0.0:8080 with pid: $process_pid was successfully killed";
    else 
        echo "Proxy kill failed or no proxy present.";
    fi;
}
